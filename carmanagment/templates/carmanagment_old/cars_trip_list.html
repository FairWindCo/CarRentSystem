{% extends 'base.html' %}
{% load fw_paginator %}
{% block SUB_MENU_CONTENT %}
    <div id="list" class="pure-u-1">
        {% for car in cars %}
            {% if car == current_car %}
                <div class="email-item email-item-selected pure-g">
            {% else %}
                <div class="email-item email-item-unread pure-g">
            {% endif %}
                    <a href="{% url 'trip_by_car' car.name  %}">
                    <div class="pure-u-3-4">
                        <h5 class="email-name">{{ car.model }}</h5>
                        <h4 class="email-subject">{{ car.name }}</h4>
                    </div>
                    </a>
                </div>
        {% endfor %}
    </div>

{% endblock %}
{% block CONTENT %}
    <div id="main" class="pure-u-1">
        <div class="email-content">
            <div class="email-content-header pure-g">
                <div class="pure-u-1-2">
                    <h1 class="email-content-title">Список поездок</h1>
                    <p class="email-content-subtitle">
                        {% if current_car.name %}
                        Авто <a>{{ current_car.name }}</a>
                        {% endif %}
                        {% if filter_form_values.start_interval %}
                        c <span>{{ filter_form_values.start_interval }}</span>
                        {% endif %}
                        {% if filter_form_values.end_interval %}
                        по <span>{{ filter_form_values.end_interval }}</span>
                        {% endif %}
                    </p>
                </div>

                <div class="email-content-controls pure-u-1-2">
                    <form method="get">
                        <input type="date" name="start_interval" placeholder="from"
                               value="{{ filter_form_values.start_interval }}"/>
                        <input type="date" name="end_interval" placeholder="to"
                               value="{{ filter_form_values.end_interval }}"/>
                        <input type="text" name="car__name" placeholder="car plate"
                               value="{{ filter_form_values.car__name }}"/>
                        <button type="submit" class="secondary-button pure-button">filter</button>
                    </form>
                </div>
            </div>

            <div class="email-content-body">
                <div class="pure-g center">
                    <table class="pure-table pure-u-1 pure-table-bordered">
                        <tr>
                            <th>Дата</th>
                            <th>Машина</th>
                            <th>Водитель</th>
                            <th>Пробег</th>
                            <th>Цена</th>
                            <th>Стоимость топлива</th>
                            <th>Доход</th>
                            <th>Зарплата</th>
                            <th>Оператор</th>
                        </tr>
                        {% for obj in object_list %}
                            <tr>
                                <td>{{ obj.timestamp|date:'d-m-Y H:i:s' }}</td>
                                <td>{{ obj.car.name }}</td>
                                <td>{{ obj.driver.name }}</td>
                                <td>{{ obj.mileage|floatformat:2 }} км</td>
                                <td>{{ obj.amount|floatformat:2 }} грн</td>
                                <td>{{ obj.fuel|floatformat:2 }} грн</td>
                                <td>{{ obj.car_amount|floatformat:2 }} грн</td>
                                <td>{{ obj.driver_amount|floatformat:2 }} грн</td>
                                <td>{{ obj.payer_amount|floatformat:2 }} грн</td>
                            </tr>
                        {% endfor %}

                    </table>
                    {% paging_navigation page_obj %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}